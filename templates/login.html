{% extends "base.html" %}
{% block content %}

<style>
  .g-0 {
    gap: 0 !important;
  }

  .login-outer {
    min-height: 80vh;
  }

  /* Left: Tagline section */
  .left-col {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f8f9fa;
    min-height: 80vh;
    padding: 40px;
    text-align: center;
  }

  .left-col h1 {
    font-size: 2.8rem;
    font-weight: 700;
    color: #198754;
    line-height: 1.3;
  }

  .left-col p {
    font-size: 1.2rem;
    color: #555;
    margin-top: 15px;
  }

  /* Right: Login card */
  .right-col {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f8f9fa;
    padding: 40px;
    min-height: 80vh;
  }

  .login-card {
    width: 100%;
    max-width: 420px;
    padding: 30px;
    border-radius: 12px;
    background: #fff;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
  }

  .login-card h2 {
    font-weight: 700;
    color: #198754;
    margin-bottom: 20px;
    text-align: center;
  }

  .login-card .form-control {
    border-radius: 8px;
    padding: 12px;
  }

  .login-card .btn {
    border-radius: 8px;
    padding: 12px;
    font-weight: 600;
    font-size: 1.05rem;
  }

  /* NEW: Style for the show/hide password icon */
  #togglePassword {
      cursor: pointer;
  }

  @media (min-width: 768px) {

    .left-col,
    .right-col {
      flex: 0 0 50%;
      max-width: 50%;
    }
  }
</style>

<div class="container-fluid g-0 login-outer">
  <div class="row g-0">
    <!-- LEFT: Tagline -->
    <div class="col-12 col-md-6 left-col">
      <div>
        <h1>Fuel Your Body,<br> Nourish Your Health</h1>
        <p>Helio helps you choose the right meal plan — personalized just for you.</p>
      </div>
    </div>

    <!-- RIGHT: Login Card -->
    <div class="col-12 col-md-6 right-col">
      <div class="login-card">
        <h2>Login</h2>
        <form method="POST">
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <input type="text" class="form-control" name="username" required>
          </div>
          
          <!-- START OF CHANGES: Password Input Group -->
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
                <input type="password" class="form-control" id="password" name="password" required>
                <!-- This is the icon that will toggle visibility -->
                <span class="input-group-text" id="togglePassword">
                    <i class="bi bi-eye-fill"></i>
                </span>
            </div>
          </div>
          <!-- END OF CHANGES -->

          <div class="d-grid">
            <button type="submit" class="btn btn-success btn-lg">Login</button>
          </div>
        </form>
        <p class="text-center mt-3 mb-0">
          Don’t have an account?
          <a href="{{ url_for('register') }}" class="text-success fw-bold">Register</a>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- NEW: JavaScript to handle the show/hide functionality -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');
        const eyeIcon = togglePassword.querySelector('i');

        togglePassword.addEventListener('click', function () {
            // Toggle the type attribute of the password input
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // Toggle the eye icon
            if (type === 'password') {
                // If it's a password, show the open eye
                eyeIcon.classList.remove('bi-eye-slash-fill');
                eyeIcon.classList.add('bi-eye-fill');
            } else {
                // If it's text, show the slashed eye
                eyeIcon.classList.remove('bi-eye-fill');
                eyeIcon.classList.add('bi-eye-slash-fill');
            }
        });
    });
</script>

{% endblock %}
